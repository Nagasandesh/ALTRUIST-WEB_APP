(this.webpackJsonpaltruist=this.webpackJsonpaltruist||[]).push([[0],{66:function(e,n,a){},72:function(e,n,a){},73:function(e,n,a){},74:function(e,n,a){},77:function(e,n,a){},81:function(e,n,a){},82:function(e,n,a){},83:function(e,n,a){},84:function(e,n,a){"use strict";a.r(n);var c=a(2),t=a.n(c),s=a(23),i=a.n(s),r=(a(66),a(13)),l=(a(72),a(26)),o=(a(73),a(74),a(48)),j=a.n(o),d=a(50),u=a.n(d),h=a(51),b=a.n(h),m=a(52),O=a.n(m),p=a(53),f=a.n(p),x=a(54),v=a.n(x),N=a(3);var g=function(e){var n=e.channelName;return Object(N.jsxs)("div",{className:"chatHeader",children:[Object(N.jsx)("div",{className:"chatHeader__left",children:Object(N.jsxs)("h3",{children:[Object(N.jsx)("span",{className:"ChatHeader__hash",children:"#"}),n]})}),Object(N.jsxs)("div",{className:"chatHeader__right",children:[Object(N.jsx)(j.a,{}),Object(N.jsx)(u.a,{}),Object(N.jsx)(b.a,{}),Object(N.jsxs)("div",{className:"chatHeader__search",children:[Object(N.jsx)("input",{placeholder:"Search"}),Object(N.jsx)(O.a,{})]}),Object(N.jsx)(f.a,{}),Object(N.jsx)(v.a,{})]})]})},_=a(55),S=a.n(_),y=a(56),I=a.n(y),C=a(57),w=a.n(C),k=(a(77),a(100));var E=function(e){var n=e.timestamp,a=e.user,c=e.message;return Object(N.jsxs)("div",{className:"message",children:[Object(N.jsx)(k.a,{src:a.photo}),Object(N.jsxs)("div",{className:"message__info",children:[Object(N.jsxs)("h4",{children:[a.displayName,Object(N.jsx)("span",{className:"message__timestamp",children:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString()})]}),Object(N.jsx)("p",{children:c})]})]})},H=a(28),z=Object(H.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,n){e.channelId=n.payload.channelId,e.channelName=n.payload.channelName}}}),A=z.actions.setChannelInfo,J=function(e){return e.app.channelId},K=function(e){return e.app.channelName},M=z.reducer,q=Object(H.b)({name:"user",initialState:{user:null},reducers:{login:function(e,n){e.user=n.payload},logout:function(e){e.user=null}}}),B=q.actions,D=B.login,W=B.logout,X=function(e){return e.user.user},F=q.reducer,G=a(30),U=G.a.initializeApp({apiKey:"AIzaSyAeO5gxKn7moSJKy_ZqNsHZYEEw9FdwHXs",authDomain:"altruist-643b8.firebaseapp.com",projectId:"altruist-643b8",storageBucket:"altruist-643b8.appspot.com",messagingSenderId:"481765529953",appId:"1:481765529953:web:c2af0ef0c62b167c0fcd20",measurementId:"G-SJ1EZKVW0M"}).firestore(),Z=G.a.auth(),P=new G.a.auth.GoogleAuthProvider,L=U;var R=function(){var e=Object(r.c)(X),n=Object(r.c)(J),a=Object(r.c)(K),t=Object(c.useState)(""),s=Object(l.a)(t,2),i=s[0],o=s[1],j=Object(c.useState)([]),d=Object(l.a)(j,2),u=d[0],h=d[1];return Object(c.useEffect)((function(){n&&L.collection("channels").doc(n).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return h(e.docs.map((function(e){return e.data()})))}))}),[n]),Object(N.jsxs)("div",{className:"chat",children:[Object(N.jsx)(g,{channelName:a}),Object(N.jsx)("div",{className:"chat__messages",children:u.map((function(e){return Object(N.jsx)(E,{timestamp:e.timestamp,message:e.message,user:e.user})}))}),Object(N.jsxs)("div",{className:"chat__input",children:[Object(N.jsx)(S.a,{fontSize:"large"}),Object(N.jsxs)("form",{children:[Object(N.jsx)("input",{value:i,disabled:!n,onChange:function(e){return o(e.target.value)},placeholder:"Message #${channelName}"}),Object(N.jsx)("button",{disabled:!n,className:"chat__inputButton",type:"submit",onClick:function(a){a.preventDefault(),L.collection("channels").doc(n).collection("messages").add({timestamp:G.a.firestore.FieldValue.serverTimestamp(),message:i,user:e}),o("")},children:"Send Message"})]}),Object(N.jsxs)("div",{className:"chat__inputIcons",children:[Object(N.jsx)(I.a,{fontSize:"large"}),Object(N.jsx)(w.a,{fontSize:"large"})]})]})]})},T=(a(81),a(42)),V=a.n(T),Y=a(58),$=a.n(Y);a(82);var Q=function(e){var n=e.id,a=e.channelName,c=Object(r.b)();return Object(N.jsx)("div",{className:"sidebarChannel",onClick:function(){return c(A({channelId:n,channelName:a}))},children:Object(N.jsxs)("h4",{children:[Object(N.jsx)("span",{className:"sidebarChannel__hash",children:"#"}),a]})})},ee=a(59),ne=a.n(ee);var ae=function(){var e=Object(r.c)(X),n=Object(c.useState)([]),a=Object(l.a)(n,2),t=a[0],s=a[1];return Object(c.useEffect)((function(){L.collection("channels").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}))}),[]),Object(N.jsxs)("div",{className:"sidebar",children:[Object(N.jsxs)("div",{className:"sidebar__top",children:[Object(N.jsx)("h3",{children:"Mysuru"}),Object(N.jsx)(V.a,{})]}),Object(N.jsxs)("div",{className:"sidebar__channels",children:[Object(N.jsxs)("div",{className:"sidebar__channelsHeader",children:[Object(N.jsxs)("div",{className:"sidebar__header",children:[Object(N.jsx)(V.a,{}),Object(N.jsx)("h4",{children:"Categories"})]}),Object(N.jsx)($.a,{onClick:function(){var e=prompt("Enter a new channel name");e&&L.collection("channels").add({channelName:e})},className:"sidebar__addChannel"})]}),Object(N.jsx)("div",{className:"sidebar__channelsList",children:t.map((function(e){var n=e.id,a=e.channel;return Object(N.jsx)(Q,{id:n,channelName:a.channelName},n)}))})]}),Object(N.jsxs)("div",{className:"sidebar__profile",children:[Object(N.jsx)(k.a,{onClick:function(){return Z.signOut()},src:e.photo}),Object(N.jsxs)("div",{className:"sidebar__profileInfo",children:[Object(N.jsx)("h3",{children:e.displayName}),Object(N.jsxs)("p",{children:["#",e.uid.substring(0,5)]})]}),Object(N.jsx)("div",{className:"sidebar__profileIcons",children:Object(N.jsx)(ne.a,{})})]})]})},ce=a(99);a(83);var te=function(){return Object(N.jsxs)("div",{className:"login",children:[Object(N.jsx)("div",{className:"login__logo",children:Object(N.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRsy-bhKsXq8DNFshaErEoJkWiI6jX5uHefKzSyq4SPQJtzZGXsUy6lMo2Y1bdu1ptXbv0&usqp=CAU",alt:""})}),Object(N.jsx)(ce.a,{onClick:function(){Z.signInWithPopup(P).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})};var se=function(){var e=Object(r.b)(),n=Object(r.c)(X);return Object(c.useEffect)((function(){Z.onAuthStateChanged((function(n){e(n?D({uid:n.uid,photo:n.photoURL,email:n.email,displayName:n.displayName}):W())}))}),[e]),Object(N.jsx)("div",{className:"app",children:n?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ae,{}),Object(N.jsx)(R,{})]}):Object(N.jsx)(te,{})})},ie=Object(H.a)({reducer:{user:F,app:M}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(N.jsx)(t.a.StrictMode,{children:Object(N.jsx)(r.a,{store:ie,children:Object(N.jsx)(se,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[84,1,2]]]);
//# sourceMappingURL=main.df08206b.chunk.js.map